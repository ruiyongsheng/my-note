### Chrome架构： 仅仅打开了一个页面，为什么会有4个进程？

**概念: 进程和线程**

多线程可以并行处理任务，但是线程是不能单独存在的，它是由进程来启动和管理的
一个进程就是一个程序的运行实例。详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫做 **进程**， 线程是依附于进程的，而进程中使用多线程并行处理能提升运算效率。

总结：

1. 进程中的任意一线程执行出错，都会导致整个进程的崩溃。
2. 线程之间共享进程中的数据
3. 当一个进程关闭之后，操作系统会回收进程所占用的内存
4. 进程之间的内容相互隔离

单进程浏览器时代： 1. 不稳定   2. 不流畅  3. 不安全

多进程浏览器时代：最新的Chrome架构包括 ： 1个浏览器 （browser） 主进程、1个GPU进程、1个网络进程、多个渲染进程和多个插件进程

- **浏览器主进程**   主要负责界面展示、用户交互、子进程管理、同时提供存储等功能
- **渲染进程**    核心任务是将HTML、CSS 和 Javascript 转换为用户可以与之交互的网页，排版引擎 Blink 和Javascript 引擎 v8 都是运行在该进程中。默认情况下，chrome会为每一个tab标签创建一个渲染进程。处于安全考虑，**渲染进程** 都是运行在沙箱模式下。
- **GPU进程**  用来实现 3D css的效果
- **网络进程**  主要负责页面的网络资源加载，之前是做为一个模块运行在浏览器进程里面的，现在独立出来了
- **插件进程**  主要是负责插件的运行，因为插件易崩溃，所以需要插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。

总结： 多进程浏览器时代，打开一个页面，至少需要1个网络进程、1个浏览器进程、1个GPU进程 和 1个渲染进程，如果有运行插件，还需要加1个插件进程

缺点： 1. 更高的资源占用  2. 更复杂的体系架构

#### 评论区知识：

1. 单个页面卡死所有页面崩溃，为什么？

   答：  same-site （协议，根域名相同）站点，公用同一个渲染进程，一个崩溃，导致所有的崩溃

2. 浏览器主进程负责将渲染进程生成的图片显示在ui上面，就是说渲染进程输出的最终是图片，浏览器显示的是图片，那么为什么浏览器中鼠标能选中文字？如果页面是图片的话文字是选不中的啊，这里面的机制又是怎样的

   答 ：点击鼠标选中文字的时候，这些消息会传递到渲染进程，渲染进程再合成选中文字的状态，然后更新图片



