### HTTP 性能优化

人们对文件传输的速度要求越来越高，故又基于 HTTP/1.0 推出了 HTTP/1.1，增加了`持久连接`方法来提升连接效率，同时还尝试使用`管线化技术`提升效率（不过由于各种原因，管线化技术最终被各大厂商放弃了）。除此之外，HTTP/1.1 还引入`了 Cookie、虚拟主机的支持、对动态内容的支持`等特性。



### HTTP/2 : 如何提升网络速度

HTTP/1.1 为了网络效率做了大量的优化，最核心的有如喜爱三种方式：

1. 增加了持久连接
2. 浏览器为每个域名最多同时维护 6个TCP 持久连接
3. 使用 CDN 的实现域名分片机制

问题： http 1.1 对带宽的使用率却并不理想 （带宽是指每秒最大能发送或者接收的字节数），每秒发送的最大字节数叫`上行带宽`， 每秒接收的最大字节数成为 `下行带宽`

缺点： 

1.  TCP 的慢启动
2. 同事开启了多条 TCP 连接，这些连接会竞争固定的带宽
3. HTTP/1.1 存在 对头阻塞的问题

#### http 2 的多路复用

![image-20210304223429227](/Users/rys/Library/Application Support/typora-user-images/image-20210304223429227.png)

**通过引入二进制分帧层，就实现了 HTTP 的多路复用技术。**

HTTP 2.0  的其他特性

1. 可以设置请求的优先级
2. 服务器推送
3. 头部压缩

在tcp层 Tls层以上的数据都是tcp层的数据，tcp层对每个数据包都有编号，分为1，2，3 .... tcp保证双向稳定可靠的传输，如果2包数据丢失，1号包和3号包来了，那么在超时重传时间还没有收到2编号数据包，服务端会发送2号数据包，客服端收到之后，发出确认，服务端才会继续发送其他数据，客服端数据才会呈现给上层应用层，这样tcp层的阻塞就发生了

### HTTP 3.0

在TCP 传输过程中，由于单个数据包的丢失而造成的阻塞称为 TCP 上的对头阻塞。

![image-20210304223916167](/Users/rys/Library/Application Support/typora-user-images/image-20210304223916167.png)

![image-20210304224054609](/Users/rys/Library/Application Support/typora-user-images/image-20210304224054609.png)



HTTP3

-  实现了类似 TCP 的流量控制、传输可靠性的功能
- 集成了 TLS 加密功能
- 实现了 HTTP 2 中的多路复用功能
- 实现了快速握手的功能



