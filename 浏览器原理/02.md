### TCP协议： 如何保证页面文件能被完整的送达浏览器？

1. FP(first paint), 是指从页面加载到首次开始绘制的时长

#### 一个数据包的旅程

1. **IP: 把数据包送达目的主机 （Internet Protocol）**

   **计算机的地址就称为 IP 地址，访问任何网站实际上只是你的计算机向另外一台计算机请求信息。**

   ![image-20210226172055979](/Users/rys/Library/Application Support/typora-user-images/image-20210226172055979.png)

2. **UDP:  把数据包送达应用程序**   （User Datagram Protocol）

   重要信息 **端口号**   **IP 通过 IP 地址信息把数据包发送给指定的电脑，而 UDP 通过端口号把数据包分发给正确的程序。**
   ![image-20210226172118881](/Users/rys/Library/Application Support/typora-user-images/image-20210226172118881.png)

3. **TCP: 把数据完整的送达应用程序**   
   **TCP（Transmission Control Protocol，传输控制协议）是一种面向连接的、可靠的、基于字节流的传输层通信协议**

   ![image-20210226172347423](/Users/rys/Library/Application Support/typora-user-images/image-20210226172347423.png)

![image-20210226172527164](/Users/rys/Library/Application Support/typora-user-images/image-20210226172527164.png)

- **首先，建立连接阶段**   所谓三次握手，是指在建立一个 TCP连接时，客户端和服务端总共需要发送三个数据包以确认连接的建立

- **其次，数据传输的阶段**   在该阶段，**接收端需要对每个数据包进行确认操作**，也就是接收端在接收到数据包之后，需要发送确认数据包给发送端。所以当发送端发送了一个数据包之后，在规定时间内没有接收到接收端反馈的确认消息，则判断为数据包丢失，并触发发送端的重发机制。同样，一个大的文件在传输过程中会被拆分成很多小的数据包，这些数据包到达接收端后，接收端会按照 TCP 头中的序号为其排序，从而保证组成完整的数据。

- 最后，断开连接阶段。数据传输完毕之后，就要终止连接了，四次挥手来保证双方都能断开链接。

  

  #### 总结：

  - 互联网中的数据是通过数据包来进行传输的，数据包在传输过程中容易丢失或出错。
  - IP 负责把数据包送达目的主机
  - UDP 负责把数据包送达具体应用
  - 而 TCP 保证数据完整的传输

  

  #### 评论精选

  1. HTTP协议和TCP协议都是TCP/IP协议簇的子集。

     HTTP协议属于应用层，TCP协议属于传输层，HTTP协议位于TCP协议的上层。

     请求方要发送的数据包，在应用层加上HTTP头以后会交给传输层的TCP协议处理，应答方接收到的数据包，在传输层拆掉TCP头以后交给应用层的HTTP协议处理。建立 TCP 连接后会顺序收发数据，请求方和应答方都必须依据 HTTP 规范构建和解析HTTP报文。

  

  

  